<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Frank Reininghaus (Posts about rust)</title><link>https://freininghaus.github.io/</link><description></description><atom:link href="https://freininghaus.github.io/categories/rust.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2024 &lt;a href="mailto:frank78ac@googlemail.com"&gt;Frank Reininghaus&lt;/a&gt; </copyright><lastBuildDate>Tue, 14 May 2024 21:19:49 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>Learn Rust by building a Brainfuck interpreter, part 3: how you should not build a parser</title><link>https://freininghaus.github.io/blog/2024/04/XX/brainfuck-interpreter-in-rust-part3/</link><dc:creator>Frank Reininghaus</dc:creator><description>&lt;div class="cell border-box-sizing text_cell rendered" id="cell-id=3f87b73d-99f3-4333-9e03-0278d843336b"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Introduction"&gt;Introduction&lt;a class="anchor-link" href="https://freininghaus.github.io/blog/2024/04/XX/brainfuck-interpreter-in-rust-part3/#Introduction"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;This is the third post in a series that builds a Brainfuck interpreter in Rust.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;In the &lt;a href="https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1"&gt;first post&lt;/a&gt;, we created the first building blocks for our Brainfuck interpreter in Rust: a data structure for the tape, and a data type for the instructions. The instructions are based on Rust's enums, which allow to build powerful &lt;a href="https://en.wikipedia.org/wiki/Algebraic_data_type"&gt;algebraic data types&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;In the &lt;a href="https://freininghaus.github.io/blog/2024/03/31/brainfuck-interpreter-in-rust-part2"&gt;second post&lt;/a&gt;, we built an execution engine that can execute a Brainfuck program which is represented by an &lt;a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree"&gt;abstract syntax tree&lt;/a&gt; in the context of a tape. We used the &lt;code&gt;Read&lt;/code&gt; and &lt;code&gt;Write&lt;/code&gt; traits to make our execution function generic, such that we could not only read from standard input and write to standard output, but also, e.g., read from byte slices and write to a vector of bytes. This makes unit testing easy.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Currently, we can only execute programs which are given as abstract syntax trees in Rust data structures, such as this one:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// read two byte values and write their sum&lt;/span&gt;
&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Loop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="fm"&gt;vec!&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Inc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Right&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Write&lt;/span&gt;
&lt;span class="p"&gt;];&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This corresponds to &lt;code&gt;,&amp;gt;,[-&amp;lt;+&amp;gt;]&amp;lt;.&lt;/code&gt; in Brainfuck source code.&lt;/p&gt;
&lt;p&gt;In the current post, we will find ways to transform the latter into the former, i.e., to parse Brainfuck source code and generate an abstract syntax tree.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Please note:&lt;/strong&gt;&lt;/em&gt; &lt;em&gt;I intentionally did this without using libraries because I wanted to build a simple parser from scratch. Since I learned a lot this way, I found it appropriate to write a blog post about the process. However, building a parser with the help of libraries that are designed for this purpose is &lt;strong&gt;much&lt;/strong&gt; easier and less error-prone. In a future post in this series, we will implement a better parser using the &lt;a href="https://docs.rs/nom/latest/nom/"&gt;Rust crate nom&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://freininghaus.github.io/blog/2024/04/XX/brainfuck-interpreter-in-rust-part3/"&gt;Read more…&lt;/a&gt; (15 min remaining to read)&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description><category>rust</category><guid>https://freininghaus.github.io/blog/2024/04/XX/brainfuck-interpreter-in-rust-part3/</guid><pubDate>Tue, 14 May 2024 21:03:14 GMT</pubDate></item><item><title>Learn Rust by building a Brainfuck interpreter, part 2: the execution engine</title><link>https://freininghaus.github.io/blog/2024/03/31/brainfuck-interpreter-in-rust-part2/</link><dc:creator>Frank Reininghaus</dc:creator><description>&lt;div class="cell border-box-sizing text_cell rendered" id="cell-id=3f87b73d-99f3-4333-9e03-0278d843336b"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Introduction"&gt;Introduction&lt;a class="anchor-link" href="https://freininghaus.github.io/blog/2024/03/31/brainfuck-interpreter-in-rust-part2/#Introduction"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;In the &lt;a href="https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1"&gt;last post&lt;/a&gt;, we created the first building blocks for our Brainfuck interpreter in Rust:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;A data structure for the tape, which supports four operations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;left&lt;/code&gt; and &lt;code&gt;right&lt;/code&gt; move the data pointer,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;get&lt;/code&gt; returns the &lt;code&gt;u8&lt;/code&gt; value that is stored in the current cell,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;set&lt;/code&gt; assigns a new &lt;code&gt;u8&lt;/code&gt; value to the current cell.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A data type for the instructions. It is based on Rust's enums, which are much more powerful than enums in C or C++ because they allow to build &lt;a href="https://en.wikipedia.org/wiki/Algebraic_data_type"&gt;algebraic data types&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#[derive(Debug)]&lt;/span&gt;
&lt;span class="k"&gt;enum&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nc"&gt;Instruction&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Inc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="c1"&gt;// +&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;                    &lt;/span&gt;&lt;span class="c1"&gt;// -&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Left&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="c1"&gt;// &amp;lt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Right&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;                  &lt;/span&gt;&lt;span class="c1"&gt;// &amp;gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Read&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;                   &lt;/span&gt;&lt;span class="c1"&gt;// ,&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Write&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt;                  &lt;/span&gt;&lt;span class="c1"&gt;// .&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="n"&gt;Loop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;Vec&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Instruction&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;// [...]&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This definition allows to represent a Brainfuck program as an &lt;a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree"&gt;abstract syntax tree&lt;/a&gt;, which makes program execution simple. However, it requires a bit more work when parsing the program, as we will see in a later post in this series.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In this post, we will implement the next part of the interpreter: an execution engine which applies instructions to the state of the tape, and performs input and output.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://freininghaus.github.io/blog/2024/03/31/brainfuck-interpreter-in-rust-part2/"&gt;Read more…&lt;/a&gt; (14 min remaining to read)&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description><category>rust</category><guid>https://freininghaus.github.io/blog/2024/03/31/brainfuck-interpreter-in-rust-part2/</guid><pubDate>Sun, 31 Mar 2024 20:49:14 GMT</pubDate></item><item><title>Learn Rust by building a Brainfuck interpreter, part 1: implement the tape and model the program as an abstract syntax tree</title><link>https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1/</link><dc:creator>Frank Reininghaus</dc:creator><description>&lt;div class="cell border-box-sizing text_cell rendered" id="cell-id=26524732-e864-4158-a826-9e0772f14cac"&gt;&lt;div class="prompt input_prompt"&gt;
&lt;/div&gt;&lt;div class="inner_cell"&gt;
&lt;div class="text_cell_render border-box-sizing rendered_html"&gt;
&lt;h3 id="Motivation"&gt;Motivation&lt;a class="anchor-link" href="https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1/#Motivation"&gt;¶&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;For many years, C++ used to be my favourite language for performance-critical applications. I find Python much more convenient for many use cases, but I have always enjoyed employing zero-cost abstractions and writing generic code that can be compiled to optimal assembly.&lt;/p&gt;
&lt;p&gt;However, C++ has a number of downsides, such as&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;problems that arise from &lt;a href="https://en.cppreference.com/w/c/language/behavior"&gt;undefined bahaviour&lt;/a&gt; in the code,&lt;a href="https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1/#fn:undefined-behavior"&gt;&lt;sup id="fnref:undefined-behavior"&gt;1&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;all the baggage it carries due to its backwards compatibility with almost all C++ code and much of the C code that has ever been written.
A consequence is that C++ is more cumbersome and error-prone to use than more modern languages, and that developers are less productive than they could be.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Rust tries to address these issues and enable excellent performance at the same time, so I decided that I should give it a try a few years ago. I started playing around with it for &lt;a href="https://adventofcode.com/"&gt;Advent of Code&lt;/a&gt; problems, enjoyed it a lot, and wondered what practice project I could try next.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1/"&gt;Read more…&lt;/a&gt; (12 min remaining to read)&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</description><category>rust</category><guid>https://freininghaus.github.io/blog/2024/02/04/brainfuck-interpreter-in-rust-part1/</guid><pubDate>Sun, 04 Feb 2024 21:23:02 GMT</pubDate></item></channel></rss>